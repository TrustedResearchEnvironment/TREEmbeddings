# Webpack TypeScript Embeddings Example

A TypeScript library for creating embeddable components that interact with the Loome API, built as an ES module.

# Deploy needs a github secret token like this 



With , url , folder, and full SAS
It expires
YOU NEED THE \ before $web in the URL !!!!!!!!!!!!!!!!
https://sttrewebdataonlyimptre.blob.core.windows.net/\$web?sp=racwdli&st=2025-10-01T00:25:25Z&se=2026-05-21T09:40:25Z&spr=https&sv=2024-11-04&sr=c&sig=8r9Ecjnc8VBKEYKEYKEYHshtY%3D

## Features

- Custom embedding library built with TypeScript and Webpack
- Exported as an ES module for modern web applications
- Supports displaying project budget data in a table format
- Includes progress bars for visualizing spend vs budget
- Easy to integrate with Loome Portal

## Getting Started

For local development:

```bash
# Install dependencies
npm install
 
# Build the project
npm run build

# Test locally
# Open test.html in your browser
```

## Usage

### Local Testing

After building the project, open the included `test.html` file in your browser to test the library locally.

### Using from GitHub Releases

You can import the library as an ES module directly from GitHub Releases:

```html
<script type="module">
  import { definition } from 'https://github.com/TrustedResearchEnvironment/webpack-ts-example/releases/download/v1.0.1/custom-embedding.js';
  
  // Initialize the embedding
  const embedding = definition.construct({
    apiUrl: 'https://example.com',
    // Add other configuration options as needed
  });
  
  // Use the embedding
  embedding.run(
    document.getElementById('embed-container'),
    'https://example.com/entity',
    [{ id: 'ApiAuthRequestId', value: '123' }],
    [
      { name: 'embedType', value: '1' },
      { name: 'embedId', value: '1' }
    ],
    errorCallback
  );
  
  function errorCallback(title, subTitle, message, element) {
    console.error(`${title}: ${subTitle} - ${message}`);
  }
</script>
```

## Publishing

The library is automatically built and published when changes are pushed to the main branch or when the workflow is manually triggered.

### Published to GitHub Releases

The compiled JavaScript file is published to GitHub Releases and can be accessed at:
```
https://github.com/TrustedResearchEnvironment/webpack-ts-example/releases/download/v1.0.1/custom-embedding.js
```

### Published to GitHub Packages

The library is also published to GitHub Packages. If your repository is private, you can install it using:

```bash
# Create .npmrc file with authentication
echo "@trustedresearchenvironment:registry=https://npm.pkg.github.com" > .npmrc
echo "//npm.pkg.github.com/:_authToken=YOUR_GITHUB_TOKEN" >> .npmrc

# Install the package
npm install @trustedresearchenvironment/webpack-ts-example
```

To publish a new version:

1. Update the version number in `package.json`
2. Commit and push your changes to the main branch
3. The GitHub Actions workflow will create a new release with the library file

## License

ISC

Generated by Copilot