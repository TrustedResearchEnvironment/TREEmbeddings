# Testing and Publishing Guide

This guide provides step-by-step instructions for testing and publishing your ES module embeddings library.

## Local Testing

### 1. Install Dependencies

First, make sure you have all dependencies installed:

```bash
npm install
```

### 2. Build the Library

Build the library using Webpack:

```bash
npm run build
```

This will create a `dist/custom-embedding.js` file that can be imported as an ES module.

### 3. Run the Local Server

Start a local HTTP server to test the library:

```bash
npm run serve
```

### 4. Open the Test Page

Open a browser and navigate to:

```
http://localhost:8080/test.html
```

This page will load your locally built library and display its exports. You can also test creating an instance using the "Test Embedding" button.

## Publishing to GitHub

### 1. Update Version (if needed)

If you're ready to publish a new version, update the version number in `package.json`.

### 2. Commit and Push Changes

Commit your changes and push them to GitHub:

```bash
git add .
git commit -m "Updated to ES module format"
git push origin main
```

### 3. GitHub Actions Workflow

The GitHub Actions workflow will automatically:
- Build the library
- Create a new release with the version from package.json
- Upload the built file as a release asset

### 4. Access the Published Library

After the workflow completes, your library will be available at:

```
https://github.com/TrustedResearchEnvironment/webpack-ts-example/releases/download/v1.0.0/custom-embedding.js
```

Replace `v1.0.0` with your actual version number.

## Importing in Other Projects

You can import the published library in any HTML page:

```html
<script type="module">
  import { definition } from 'https://github.com/TrustedResearchEnvironment/webpack-ts-example/releases/download/v1.0.0/custom-embedding.js';
  
  // Use the library...
  const embedding = definition.construct({
    apiUrl: 'https://example.com',
    // other configuration options
  });
</script>
```

## Troubleshooting

### Cross-Origin Issues

If you encounter CORS issues when loading the module from GitHub:
1. Ensure you're using `https://` URLs
2. Consider using a CDN like jsDelivr:
   ```
   https://cdn.jsdelivr.net/gh/TrustedResearchEnvironment/webpack-ts-example@v1.0.0/dist/custom-embedding.js
   ```

### Module Loading Issues

If the module doesn't load:
1. Check browser console for errors
2. Verify your browser supports ES modules
3. Ensure the file is being served with the correct MIME type (`application/javascript`)

<!-- Generated by Copilot -->
